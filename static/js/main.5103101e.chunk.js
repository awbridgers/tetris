(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,a){e.exports=a(33)},27:function(e,t,a){},28:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(17),c=a.n(o),i=(a(27),a(14)),s=a(5),l=a(6),u=a(10),p=a(8),f=a(9),d=(a(28),a(3)),m=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).colorSquares=function(){var t=e.props.currentTetro,a=e.canvas.getContext("2d"),r=36;window.screen.width<667&&(r=24,e.canvas.setAttribute("width",240),e.canvas.setAttribute("height",384)),a.clearRect(0,0,10*r,16*r),e.props.board.forEach(function(e,t){e.forEach(function(e,n){a.beginPath(),a.rect(n*r,t*r,r-1,r-1),0===e&&(a.fillStyle="#2E2E2E"),1===e?a.fillStyle="#FFFF00":2===e?a.fillStyle="#00FFFF":3===e?a.fillStyle="#00FF00":4===e?a.fillStyle="#FF0000":5===e?a.fillStyle="#8000FF":6===e?a.fillStyle="#FF8000":7===e&&(a.fillStyle="#0000FF"),a.fill()}),a.closePath()}),e.props.gameStarted&&t.shape.forEach(function(e,n){e.forEach(function(o,c){a.beginPath(),a.rect((c+t.topLeft.col)*r,(n+t.topLeft.row)*r,r-1,r-1),0!==e&&0!==o&&(1===o?a.fillStyle="#FFFF00":2===o?a.fillStyle="#00FFFF":3===o?a.fillStyle="#00FF00":4===o?a.fillStyle="#FF0000":5===o?a.fillStyle="#8000FF":6===o?a.fillStyle="#FF8000":7===o&&(a.fillStyle="#0000FF"),a.fill()),a.closePath()})})},e.canvas=null,e}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.colorSquares()}},{key:"componentDidMount",value:function(){this.colorSquares()}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"board"},n.a.createElement("canvas",{height:"576",width:"360",ref:function(t){return e.canvas=t}}))}}]),t}(r.Component),h=Object(d.b)(function(e){return{board:e.board,currentTetro:e.currentTetro,gameStarted:e.gameStarted,gameOver:e.gameOver}})(m),v=a(19),g=a.n(v),E=a(20),w=a.n(E),T=function(e){return n.a.createElement("div",{className:"points"},n.a.createElement("h1",null,n.a.createElement("u",null,"Score")),n.a.createElement("h2",null,e.score))},y=function(e){return n.a.createElement("div",{className:"gameStart"},n.a.createElement("button",{onClick:e.startGame},"".concat(e.gameOn?"Pause":"Start")))},S=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).updateScore=function(t){var a=0;switch(t){case 1:a=40;break;case 2:a=100;break;case 3:a=300;break;case 4:a=1200;break;default:a=0}e.props.updateScore(e.props.score+a)},e.addTetroToBoard=function(t){for(var a=e.props.board.slice(0),r=0;r<t.shape.length;r++)for(var n=0;n<t.shape[r].length;n++)0!==t.shape[r][n]&&(a[r+t.topLeft.row][n+t.topLeft.col]=t.shape[r][n]);e.landed=!0,e.props.updateBoard(a,!0)},e.arrayIsEqual=function(e,t){if(e.length!==t.length)return!1;for(var a=0;a<e.length;a++)if(!g()(e[a],t[a]))return!1;return!0},e.rotate=function(){var t=Object(i.a)({},e.props.currentTetro),a=t.rotations.findIndex(function(a){return e.arrayIsEqual(a,t.shape)});a=a+1>=t.rotations.length?0:a+1,t.newShape=t.rotations[a],e.checkMove(t,"rotate").movePiece&&(t.shape=t.rotations[a],e.props.updateTetro(t))},e.checkMove=function(t,a){var r,n;"rotate"===a?(r=t.newShape,n=t.topLeft):"spawn"===a?(r=t.shape,n=t.topLeft):(r=t.shape,n=t.newTopLeft);for(var o=0;o<r.length;o++)for(var c=0;c<r[o].length;c++)if(0!==r[o][c]){if(n.col+c>9||n.col+c<0)return{movePiece:!1,placePiece:!1};if(n.row+o>15)return{movePiece:!1,placePiece:!0};if(0!==e.props.board[o+n.row][c+n.col])return"right"===a||"left"===a?{movePiece:!1,placePiece:!1}:{movePiece:!1,placePiece:!0}}return{movePiece:!0,placePiece:!1}},e.moveTetro=function(t){var a=Object(i.a)({},e.props.currentTetro);switch(t){case"left":a.newTopLeft={row:a.topLeft.row,col:a.topLeft.col-1};break;case"right":a.newTopLeft={row:a.topLeft.row,col:a.topLeft.col+1};break;case"down":a.newTopLeft={row:a.topLeft.row+1,col:a.topLeft.col};break;case"up":a.newTopLeft={row:a.topLeft.row-1,col:a.topLeft.col}}var r=e.checkMove(a,t);r.movePiece?(a.topLeft=a.newTopLeft,e.props.updateTetro(a)):r.placePiece&&e.addTetroToBoard(a)},e.onKeyDown=function(t,a){t.preventDefault();var r=a?parseInt(t.target.id,10):t.keyCode;if(e.props.gameOn)switch(r){case 37:e.moveTetro("left");break;case 39:e.moveTetro("right");break;case 40:e.moveTetro("down");break;case 38:e.rotate()}},e.startGame=function(){e.props.gameOver?e.newGame():e.props.gameStarted?e.props.gameOn?(e.props.changeGameStatus(!1),clearInterval(e.gameInterval)):(e.props.changeGameStatus(!0),e.beginGameProcess=!0):(e.props.startGame(!e.props.gameStarted),e.props.changeGameStatus(!e.props.gameOn),e.gameDiv.focus(),e.props.newTetro(),e.beginGameProcess=!0)},e.newGame=function(){e.props.resetGame(),e.beginGameProcess=!0},e.speed=750,e}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.gameDiv.focus(),this.beginGameProcess=!1}},{key:"componentDidUpdate",value:function(){var e=this;if(this.beginGameProcess&&(this.gameInterval=setInterval(function(){return e.moveTetro("down")},this.speed),this.beginGameProcess=!1),this.landed){var t=this.props.board.filter(function(e){return e.includes(0)}),a=16-t.length;if(a>0){for(var r=0;r<a;r++)t.unshift([0,0,0,0,0,0,0,0,0,0]);this.updateScore(a),this.props.updateBoard(t,!1)}this.checkMove(this.props.currentTetro,"spawn").placePiece?(clearInterval(this.gameInterval),this.props.changeGameStatus(!1),this.props.changeGameOver(!0),this.landed=!1):this.landed=!1}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"app"},n.a.createElement("div",{ref:function(t){return e.gameDiv=t},className:"canvas",onKeyDown:function(t){return e.onKeyDown(t,!1)},tabIndex:"1"},!this.props.gameOn&&this.props.gameStarted&&n.a.createElement("h1",{className:"paused"},"".concat(this.props.gameOver?"Game Over":"Game Paused")),n.a.createElement(h,null),n.a.createElement("div",{className:"score"},n.a.createElement(T,{score:this.props.score})),n.a.createElement("div",{className:"start"},n.a.createElement(y,{startGame:this.startGame,gameOn:this.props.gameOn}))),n.a.createElement(w.a,{maxDeviceWidth:1224},n.a.createElement("div",{className:"controlDiv"},n.a.createElement("div",{className:"left"},n.a.createElement("button",{id:"37",onClick:function(t){return e.onKeyDown(t,!0)}},"\u25c0\ufe0e")),n.a.createElement("div",{className:"middle"},n.a.createElement("button",{id:"38",onClick:function(t){return e.onKeyDown(t,!0)}},"\u25b2\ufe0e"),n.a.createElement("button",{id:"40",onClick:function(t){return e.onKeyDown(t,!0)}},"\u25bc\ufe0e")),n.a.createElement("div",{className:"right"},n.a.createElement("button",{id:"39",onClick:function(t){return e.onKeyDown(t,!0)}},"\u25b6\ufe0e")))))}}]),t}(r.Component),b=Object(d.b)(function(e){return{board:e.board,currentTetro:e.currentTetro,score:e.score,gameOn:e.gameOn,gameStarted:e.gameStarted,gameOver:e.gameOver}},function(e){return{updateTetro:function(t){return e(function(e){return{type:"UPDATE_TETRO",tetro:e}}(t))},updateBoard:function(t,a){return e(function(e,t){return{type:"UPDATE_BOARD",payload:e,spawn:t}}(t,a))},newTetro:function(){return e({type:"SPAWN_TETRO"})},updateScore:function(t){return e(function(e){return{type:"UPDATE_SCORE",payload:e}}(t))},changeGameStatus:function(t){return e(function(e){return{type:"SWITCH_GAME_ON",payload:e}}(t))},startGame:function(t){return e(function(e){return{type:"START_GAME",payload:e}}(t))},changeGameOver:function(t){return e(function(e){return{type:"SWITCH_GAME_OVER",payload:e}}(t))},resetGame:function(){return e({type:"RESET_GAME"})}}})(S);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=a(1),G=a(21),F=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],P=[{name:"O",shape:[[1,1],[1,1]],rotations:[[[1,1],[1,1]]],topLeft:{row:0,col:4}},{name:"I",shape:[[2],[2],[2],[2]],rotations:[[[2],[2],[2],[2]],[[2,2,2,2]]],topLeft:{row:0,col:4}},{name:"Z",shape:[[3,3,0],[0,3,3]],rotations:[[[3,3,0],[0,3,3]],[[0,3],[3,3],[3,0]]],topLeft:{row:0,col:4}},{name:"S",shape:[[0,4,4],[4,4,0]],rotations:[[[0,4,4],[4,4,0]],[[4,0],[4,4],[0,4]]],topLeft:{row:0,col:4}},{name:"T",shape:[[5,5,5],[0,5,0]],rotations:[[[5,5,5],[0,5,0]],[[0,5],[5,5],[0,5]],[[0,5,0],[5,5,5]],[[5,0],[5,5],[5,0]]],topLeft:{row:0,col:4}},{name:"L",shape:[[0,6,0],[0,6,0],[0,6,6]],rotations:[[[0,6,0],[0,6,0],[0,6,6]],[[6,6,6],[6,0,0]],[[6,6],[0,6],[0,6]],[[0,0,6],[6,6,6]]],topLeft:{row:0,col:3}},{name:"J",shape:[[0,7,0],[0,7,0],[7,7,0]],rotations:[[[0,7,0],[0,7,0],[7,7,0]],[[7,0,0],[7,7,7]],[[7,7],[7,0],[7,0]],[[7,7,7],[0,0,7]]],topLeft:{row:0,col:4}}],A=Object(O.combineReducers)({board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Array.from(F),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_BOARD":return t.payload;case"RESET_GAME":return[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];default:return e}},currentTetro:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_BOARD":return t.spawn?P[Math.floor(Math.random()*P.length)]:e;case"UPDATE_TETRO":return t.tetro;case"SPAWN_TETRO":case"RESET_GAME":return P[Math.floor(Math.random()*P.length)];default:return e}},score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SCORE":return t.payload;case"RESET_GAME":return 0;default:return e}},gameOn:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_GAME_ON":return t.payload;case"RESET_GAME":return!0;default:return e}},gameStarted:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_GAME":return t.payload;case"RESET_GAME":return!0;default:return e}},gameOver:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_GAME_OVER":return t.payload;case"RESET_GAME":return!1;default:return e}},date:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_DATE":return t.payload;default:return e}}}),D=Object(O.createStore)(A,void 0,Object(G.composeWithDevTools)());c.a.render(n.a.createElement(d.a,{store:D},n.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.5103101e.chunk.js.map